generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_1")
}

// User Model (for later auth integration)
model User {
  id            String    @id @default(cuid())
  email         String    @unique
  name          String?
  phone         String?
  location      String?
  skills        String[]
  interests     String[]
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  
  businesses    Business[]
  designs       Design[]
  consultations Consultation[]
  
  @@map("users")
}

// Business Ideas
model Business {
  id          String   @id @default(cuid())
  userId      String
  name        String
  description String   @db.Text
  category    String
  investment  String
  revenue     String?
  location    String
  status      String   @default("draft") // draft, active, completed
  aiGenerated Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  products    Product[]
  
  @@map("businesses")
}

// Products for Store Builder
model Product {
  id          String   @id @default(cuid())
  businessId  String
  name        String
  description String   @db.Text
  price       Float
  images      String[]
  category    String
  stock       Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  business    Business @relation(fields: [businessId], references: [id], onDelete: Cascade)
  
  @@map("products")
}

// AI Design Generator
model Design {
  id          String   @id @default(cuid())
  userId      String
  type        String   // logo, label, banner, social-post
  prompt      String   @db.Text
  imageUrl    String
  publicId    String   // Cloudinary public ID
  dimensions  String
  style       String?
  createdAt   DateTime @default(now())
  
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("designs")
}

// Mentor Consultations
model Consultation {
  id          String   @id @default(cuid())
  userId      String
  mentorName  String
  topic       String
  description String   @db.Text
  date        DateTime
  duration    Int      // minutes
  status      String   @default("pending") // pending, confirmed, completed, cancelled
  meetLink    String?
  notes       String?  @db.Text
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("consultations")
}

// Contact Form Submissions
model Contact {
  id        String   @id @default(cuid())
  name      String
  email     String
  subject   String
  message   String   @db.Text
  status    String   @default("new") // new, read, replied
  createdAt DateTime @default(now())
  
  @@map("contacts")
}

// Newsletter Subscriptions
model Newsletter {
  id        String   @id @default(cuid())
  email     String   @unique
  status    String   @default("active") // active, unsubscribed
  createdAt DateTime @default(now())
  
  @@map("newsletters")
}

// Market Insights
model MarketInsight {
  id          String   @id @default(cuid())
  category    String
  title       String
  description String   @db.Text
  trend       String   // rising, stable, falling
  demand      Int      // 1-100 scale
  competition Int      // 1-100 scale
  data        Json?    // Additional market data
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@map("market_insights")
}

// Events
model Event {
  id          String   @id @default(cuid())
  title       String
  description String   @db.Text
  date        DateTime
  location    String
  type        String   // workshop, webinar, networking
  maxSeats    Int
  bookedSeats Int      @default(0)
  imageUrl    String?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@map("events")
}

// Pricing Predictions
model PricingPrediction {
  id          String   @id @default(cuid())
  userId      String?
  productName String
  category    String
  cost        Float
  location    String
  suggestedPrice Float
  minPrice    Float
  maxPrice    Float
  confidence  Float    // 0-1 scale
  factors     Json?    // Market factors considered
  createdAt   DateTime @default(now())
  
  @@map("pricing_predictions")
}